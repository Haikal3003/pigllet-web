---
import Button from "../common/Button.astro"

const navLinks = [
	{name: "Home", href: "/"},
	{name: "About", href: "/about"},
	{name: "Pricing", href: "/pricing"},
	{name: "Contact", href: "/contact"}
]

const currentPath = Astro.url.pathname;
---

<nav id="navbar" class="fixed w-full left-0 top-0 px-36 py-7 bg-white transition-transform duration-300 ease-in-out ">
	<div class="flex justify-between items-center">
		<h1>PIGLLET</h1>

		<ul class="flex items-center space-x-6">
			{navLinks.map((link) => {
				const isActive = currentPath === link.href;
				return (
					<li>
						<a 
							href={link.href} 
							class="relative pb-2"
						>
							{link.name}
							{isActive && <span class="absolute left-1/2 bottom-0 -translate-x-1/2 w-1/2 h-0.5 rounded-full bg-red-400"></span>}
						</a>
					</li>
				);
			})}
		</ul>

		<Button text={"Download App"} href="/" />
	</div>
</nav>

<script type="module">
	let lastScrollTop = window.scrollY;
	const navbar = document.querySelector("#navbar");
	const scrollThreshold = 80; 


	window.addEventListener("scroll", () => {
		const scrollTop = window.scrollY;

		if (scrollTop < scrollThreshold) {
			navbar.style.transform = "translateY(0)";
		} else {
			if (scrollTop > lastScrollTop) {
				navbar.style.transform = "translateY(-100%)";
			} else {
				navbar.style.transform = "translateY(0)";
			}
		}

		lastScrollTop = scrollTop;
	});
</script>
